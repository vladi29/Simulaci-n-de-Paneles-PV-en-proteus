CCS PCM C Compiler, Version 5.095d, 1               13-Aug-20 15:32
Compiler operating in Evaluation Mode
To obtain a fully enabled compiler visit www.ccsinfo.com/products

               Filename:   C:\Users\Usuario\OneDrive\Escritorio\USB\Verano 2020\Electiva de Electronica de Potencia\Proyecto 2\Simulaci-n-de-Paneles-PV-en-proteus\PIC PWM + MPPT2\PIC16f887_MPPT2.lst

               ROM used:   1023 words (12%)
                           Largest free fragment is 2048
               RAM used:   38 (10%) at main() level
                           50 (14%) worst case
               Stack used: 1 locations
               Stack size: 8

0000:  MOVLW  02
0001:  MOVWF  0A
0002:  GOTO   216
0003:  NOP
.................... //Vladimir Alfaro - Universidad Sim?n Bol?var - 09/08/2020 
.................... //Con este c?digo se pretende dise?ar el algoritmo de control MMPT para un microcontrolador PIC16F887
.................... //-----------------------------------------------------------------------------------------------------
.................... 
.................... #include <16f887.h>
.................... //////////// Standard Header file for the PIC16F887 device ////////////////
.................... ///////////////////////////////////////////////////////////////////////////
.................... ////        (C) Copyright 1996, 2020 Custom Computer Services          ////
.................... //// This source code may only be used by licensed users of the CCS C  ////
.................... //// compiler.  This source code may only be distributed to other      ////
.................... //// licensed users of the CCS C compiler.  No other use, reproduction ////
.................... //// or distribution is permitted without written permission.          ////
.................... //// Derivative programs created using this software in object code    ////
.................... //// form are not restricted in any way.                               ////
.................... ///////////////////////////////////////////////////////////////////////////
.................... #device PIC16F887
0004:  MOVLW  8E
0005:  MOVWF  77
0006:  MOVF   3E,W
0007:  MOVWF  78
0008:  MOVF   3D,W
0009:  MOVWF  79
000A:  CLRF   7A
000B:  MOVF   78,F
000C:  BTFSS  03.2
000D:  GOTO   018
000E:  MOVF   79,W
000F:  MOVWF  78
0010:  CLRF   79
0011:  MOVLW  08
0012:  SUBWF  77,F
0013:  MOVF   78,F
0014:  BTFSS  03.2
0015:  GOTO   018
0016:  CLRF   77
0017:  GOTO   020
0018:  BCF    03.0
0019:  BTFSC  78.7
001A:  GOTO   01F
001B:  RLF    79,F
001C:  RLF    78,F
001D:  DECF   77,F
001E:  GOTO   018
001F:  BCF    78.7
0020:  RETURN
0021:  MOVF   3D,W
0022:  BTFSC  03.2
0023:  GOTO   091
0024:  MOVWF  45
0025:  MOVF   41,W
0026:  BTFSC  03.2
0027:  GOTO   091
0028:  ADDWF  45,F
0029:  BTFSC  03.0
002A:  GOTO   032
002B:  MOVLW  7F
002C:  SUBWF  45,F
002D:  BTFSS  03.0
002E:  GOTO   091
002F:  BTFSC  03.2
0030:  GOTO   091
0031:  GOTO   036
0032:  MOVLW  81
0033:  ADDWF  45,F
0034:  BTFSC  03.0
0035:  GOTO   091
0036:  MOVF   45,W
0037:  MOVWF  77
0038:  CLRF   78
0039:  CLRF   79
003A:  CLRF   7A
003B:  MOVF   3E,W
003C:  MOVWF  49
003D:  BSF    49.7
003E:  MOVF   3F,W
003F:  MOVWF  48
0040:  MOVF   40,W
0041:  MOVWF  47
0042:  MOVLW  18
0043:  MOVWF  45
0044:  CLRF   46
0045:  BTFSS  47.0
0046:  GOTO   05F
0047:  MOVF   44,W
0048:  ADDWF  7A,F
0049:  BTFSS  03.0
004A:  GOTO   051
004B:  INCF   79,F
004C:  BTFSS  03.2
004D:  GOTO   051
004E:  INCF   78,F
004F:  BTFSC  03.2
0050:  BSF    46.7
0051:  MOVF   43,W
0052:  ADDWF  79,F
0053:  BTFSS  03.0
0054:  GOTO   058
0055:  INCF   78,F
0056:  BTFSC  03.2
0057:  BSF    46.7
0058:  MOVF   42,W
0059:  MOVWF  3F
005A:  BSF    3F.7
005B:  MOVF   3F,W
005C:  ADDWF  78,F
005D:  BTFSC  03.0
005E:  BSF    46.7
005F:  RLF    46,F
0060:  RRF    78,F
0061:  RRF    79,F
0062:  RRF    7A,F
0063:  RRF    49,F
0064:  RRF    48,F
0065:  RRF    47,F
0066:  BCF    03.0
0067:  DECFSZ 45,F
0068:  GOTO   044
0069:  MOVLW  01
006A:  ADDWF  77,F
006B:  BTFSC  03.0
006C:  GOTO   091
006D:  BTFSC  78.7
006E:  GOTO   076
006F:  RLF    49,F
0070:  RLF    7A,F
0071:  RLF    79,F
0072:  RLF    78,F
0073:  DECF   77,F
0074:  BTFSC  03.2
0075:  GOTO   091
0076:  BTFSS  49.7
0077:  GOTO   087
0078:  INCF   7A,F
0079:  BTFSS  03.2
007A:  GOTO   087
007B:  INCF   79,F
007C:  BTFSS  03.2
007D:  GOTO   087
007E:  INCF   78,F
007F:  BTFSS  03.2
0080:  GOTO   087
0081:  RRF    78,F
0082:  RRF    79,F
0083:  RRF    7A,F
0084:  INCF   77,F
0085:  BTFSC  03.2
0086:  GOTO   091
0087:  MOVF   3E,W
0088:  MOVWF  46
0089:  MOVF   42,W
008A:  XORWF  46,F
008B:  BTFSS  46.7
008C:  GOTO   08F
008D:  BSF    78.7
008E:  GOTO   095
008F:  BCF    78.7
0090:  GOTO   095
0091:  CLRF   77
0092:  CLRF   78
0093:  CLRF   79
0094:  CLRF   7A
0095:  RETURN
0096:  MOVLW  80
0097:  BTFSC  03.1
0098:  XORWF  42,F
0099:  CLRF   47
009A:  CLRF   48
009B:  MOVF   3E,W
009C:  MOVWF  46
009D:  MOVF   42,W
009E:  XORWF  46,F
009F:  MOVF   3D,W
00A0:  BTFSC  03.2
00A1:  GOTO   186
00A2:  MOVWF  45
00A3:  MOVWF  77
00A4:  MOVF   41,W
00A5:  BTFSC  03.2
00A6:  GOTO   18F
00A7:  SUBWF  45,F
00A8:  BTFSC  03.2
00A9:  GOTO   12B
00AA:  BTFSS  03.0
00AB:  GOTO   0E9
00AC:  MOVF   42,W
00AD:  MOVWF  4B
00AE:  BSF    4B.7
00AF:  MOVF   43,W
00B0:  MOVWF  4A
00B1:  MOVF   44,W
00B2:  MOVWF  49
00B3:  CLRF   48
00B4:  BCF    03.0
00B5:  RRF    4B,F
00B6:  RRF    4A,F
00B7:  RRF    49,F
00B8:  RRF    48,F
00B9:  DECFSZ 45,F
00BA:  GOTO   0B3
00BB:  BTFSS  46.7
00BC:  GOTO   0C0
00BD:  BSF    47.0
00BE:  GOTO   1A3
00BF:  BCF    47.0
00C0:  BCF    45.0
00C1:  BSF    47.4
00C2:  MOVLW  40
00C3:  MOVWF  04
00C4:  BCF    03.7
00C5:  GOTO   1B8
00C6:  BCF    47.4
00C7:  BTFSC  46.7
00C8:  GOTO   0D3
00C9:  BTFSS  45.0
00CA:  GOTO   0DE
00CB:  RRF    4B,F
00CC:  RRF    4A,F
00CD:  RRF    49,F
00CE:  RRF    48,F
00CF:  INCF   77,F
00D0:  BTFSC  03.2
00D1:  GOTO   19E
00D2:  GOTO   0DE
00D3:  BTFSC  4B.7
00D4:  GOTO   0E1
00D5:  BCF    03.0
00D6:  RLF    48,F
00D7:  RLF    49,F
00D8:  RLF    4A,F
00D9:  RLF    4B,F
00DA:  DECF   77,F
00DB:  BTFSC  03.2
00DC:  GOTO   19E
00DD:  GOTO   0D3
00DE:  BSF    47.6
00DF:  GOTO   14B
00E0:  BCF    47.6
00E1:  MOVF   3E,W
00E2:  MOVWF  46
00E3:  BTFSS  46.7
00E4:  GOTO   0E7
00E5:  BSF    4B.7
00E6:  GOTO   197
00E7:  BCF    4B.7
00E8:  GOTO   197
00E9:  MOVF   41,W
00EA:  MOVWF  45
00EB:  MOVWF  77
00EC:  MOVF   3D,W
00ED:  SUBWF  45,F
00EE:  MOVF   3E,W
00EF:  MOVWF  4B
00F0:  BSF    4B.7
00F1:  MOVF   3F,W
00F2:  MOVWF  4A
00F3:  MOVF   40,W
00F4:  MOVWF  49
00F5:  CLRF   48
00F6:  BCF    03.0
00F7:  RRF    4B,F
00F8:  RRF    4A,F
00F9:  RRF    49,F
00FA:  RRF    48,F
00FB:  DECFSZ 45,F
00FC:  GOTO   0F5
00FD:  BTFSS  46.7
00FE:  GOTO   102
00FF:  BSF    47.1
0100:  GOTO   1A3
0101:  BCF    47.1
0102:  BCF    45.0
0103:  BSF    47.5
0104:  MOVLW  44
0105:  MOVWF  04
0106:  BCF    03.7
0107:  GOTO   1B8
0108:  BCF    47.5
0109:  BTFSC  46.7
010A:  GOTO   115
010B:  BTFSS  45.0
010C:  GOTO   120
010D:  RRF    4B,F
010E:  RRF    4A,F
010F:  RRF    49,F
0110:  RRF    48,F
0111:  INCF   77,F
0112:  BTFSC  03.2
0113:  GOTO   19E
0114:  GOTO   120
0115:  BTFSC  4B.7
0116:  GOTO   123
0117:  BCF    03.0
0118:  RLF    48,F
0119:  RLF    49,F
011A:  RLF    4A,F
011B:  RLF    4B,F
011C:  DECF   77,F
011D:  BTFSC  03.2
011E:  GOTO   19E
011F:  GOTO   115
0120:  BSF    47.7
0121:  GOTO   14B
0122:  BCF    47.7
0123:  MOVF   42,W
0124:  MOVWF  46
0125:  BTFSS  46.7
0126:  GOTO   129
0127:  BSF    4B.7
0128:  GOTO   197
0129:  BCF    4B.7
012A:  GOTO   197
012B:  MOVF   42,W
012C:  MOVWF  4B
012D:  BSF    4B.7
012E:  MOVF   43,W
012F:  MOVWF  4A
0130:  MOVF   44,W
0131:  MOVWF  49
0132:  BTFSS  46.7
0133:  GOTO   138
0134:  BCF    4B.7
0135:  BSF    47.2
0136:  GOTO   1A3
0137:  BCF    47.2
0138:  CLRF   48
0139:  BCF    45.0
013A:  MOVLW  40
013B:  MOVWF  04
013C:  BCF    03.7
013D:  GOTO   1B8
013E:  BTFSC  46.7
013F:  GOTO   161
0140:  MOVF   3E,W
0141:  MOVWF  46
0142:  BTFSS  45.0
0143:  GOTO   14B
0144:  RRF    4B,F
0145:  RRF    4A,F
0146:  RRF    49,F
0147:  RRF    48,F
0148:  INCF   77,F
0149:  BTFSC  03.2
014A:  GOTO   19E
014B:  BTFSS  48.7
014C:  GOTO   15C
014D:  INCF   49,F
014E:  BTFSS  03.2
014F:  GOTO   15C
0150:  INCF   4A,F
0151:  BTFSS  03.2
0152:  GOTO   15C
0153:  INCF   4B,F
0154:  BTFSS  03.2
0155:  GOTO   15C
0156:  RRF    4B,F
0157:  RRF    4A,F
0158:  RRF    49,F
0159:  INCF   77,F
015A:  BTFSC  03.2
015B:  GOTO   19E
015C:  BTFSC  47.6
015D:  GOTO   0E0
015E:  BTFSC  47.7
015F:  GOTO   122
0160:  GOTO   180
0161:  MOVLW  80
0162:  XORWF  4B,F
0163:  BTFSS  4B.7
0164:  GOTO   169
0165:  GOTO   1A3
0166:  MOVF   42,W
0167:  MOVWF  46
0168:  GOTO   176
0169:  MOVF   3E,W
016A:  MOVWF  46
016B:  MOVF   4B,F
016C:  BTFSS  03.2
016D:  GOTO   176
016E:  MOVF   4A,F
016F:  BTFSS  03.2
0170:  GOTO   176
0171:  MOVF   49,F
0172:  BTFSS  03.2
0173:  GOTO   176
0174:  CLRF   77
0175:  GOTO   197
0176:  BTFSC  4B.7
0177:  GOTO   180
0178:  BCF    03.0
0179:  RLF    48,F
017A:  RLF    49,F
017B:  RLF    4A,F
017C:  RLF    4B,F
017D:  DECFSZ 77,F
017E:  GOTO   176
017F:  GOTO   19E
0180:  BTFSS  46.7
0181:  GOTO   184
0182:  BSF    4B.7
0183:  GOTO   197
0184:  BCF    4B.7
0185:  GOTO   197
0186:  MOVF   41,W
0187:  MOVWF  77
0188:  MOVF   42,W
0189:  MOVWF  4B
018A:  MOVF   43,W
018B:  MOVWF  4A
018C:  MOVF   44,W
018D:  MOVWF  49
018E:  GOTO   197
018F:  MOVF   3D,W
0190:  MOVWF  77
0191:  MOVF   3E,W
0192:  MOVWF  4B
0193:  MOVF   3F,W
0194:  MOVWF  4A
0195:  MOVF   40,W
0196:  MOVWF  49
0197:  MOVF   4B,W
0198:  MOVWF  78
0199:  MOVF   4A,W
019A:  MOVWF  79
019B:  MOVF   49,W
019C:  MOVWF  7A
019D:  GOTO   1D6
019E:  CLRF   77
019F:  CLRF   78
01A0:  CLRF   79
01A1:  CLRF   7A
01A2:  GOTO   1D6
01A3:  CLRF   48
01A4:  COMF   49,F
01A5:  COMF   4A,F
01A6:  COMF   4B,F
01A7:  COMF   48,F
01A8:  INCF   48,F
01A9:  BTFSS  03.2
01AA:  GOTO   1B1
01AB:  INCF   49,F
01AC:  BTFSS  03.2
01AD:  GOTO   1B1
01AE:  INCF   4A,F
01AF:  BTFSC  03.2
01B0:  INCF   4B,F
01B1:  BTFSC  47.0
01B2:  GOTO   0BF
01B3:  BTFSC  47.1
01B4:  GOTO   101
01B5:  BTFSC  47.2
01B6:  GOTO   137
01B7:  GOTO   166
01B8:  MOVF   00,W
01B9:  ADDWF  49,F
01BA:  BTFSS  03.0
01BB:  GOTO   1C2
01BC:  INCF   4A,F
01BD:  BTFSS  03.2
01BE:  GOTO   1C2
01BF:  INCF   4B,F
01C0:  BTFSC  03.2
01C1:  BSF    45.0
01C2:  DECF   04,F
01C3:  MOVF   00,W
01C4:  ADDWF  4A,F
01C5:  BTFSS  03.0
01C6:  GOTO   1CA
01C7:  INCF   4B,F
01C8:  BTFSC  03.2
01C9:  BSF    45.0
01CA:  DECF   04,F
01CB:  MOVF   00,W
01CC:  BTFSS  00.7
01CD:  XORLW  80
01CE:  ADDWF  4B,F
01CF:  BTFSC  03.0
01D0:  BSF    45.0
01D1:  BTFSC  47.4
01D2:  GOTO   0C6
01D3:  BTFSC  47.5
01D4:  GOTO   108
01D5:  GOTO   13E
01D6:  RETURN
01D7:  MOVF   42,W
01D8:  MOVWF  49
01D9:  MOVF   46,W
01DA:  XORWF  49,F
01DB:  BTFSS  49.7
01DC:  GOTO   1E2
01DD:  BCF    03.2
01DE:  BCF    03.0
01DF:  BTFSC  42.7
01E0:  BSF    03.0
01E1:  GOTO   215
01E2:  MOVF   42,W
01E3:  MOVWF  49
01E4:  MOVF   45,W
01E5:  MOVWF  4A
01E6:  MOVF   41,W
01E7:  SUBWF  4A,F
01E8:  BTFSC  03.2
01E9:  GOTO   1F0
01EA:  BTFSS  49.7
01EB:  GOTO   215
01EC:  MOVF   03,W
01ED:  XORLW  01
01EE:  MOVWF  03
01EF:  GOTO   215
01F0:  MOVF   46,W
01F1:  MOVWF  4A
01F2:  MOVF   42,W
01F3:  SUBWF  4A,F
01F4:  BTFSC  03.2
01F5:  GOTO   1FC
01F6:  BTFSS  49.7
01F7:  GOTO   215
01F8:  MOVF   03,W
01F9:  XORLW  01
01FA:  MOVWF  03
01FB:  GOTO   215
01FC:  MOVF   47,W
01FD:  MOVWF  4A
01FE:  MOVF   43,W
01FF:  SUBWF  4A,F
0200:  BTFSC  03.2
0201:  GOTO   208
0202:  BTFSS  49.7
0203:  GOTO   215
0204:  MOVF   03,W
0205:  XORLW  01
0206:  MOVWF  03
0207:  GOTO   215
0208:  MOVF   48,W
0209:  MOVWF  4A
020A:  MOVF   44,W
020B:  SUBWF  4A,F
020C:  BTFSC  03.2
020D:  GOTO   214
020E:  BTFSS  49.7
020F:  GOTO   215
0210:  MOVF   03,W
0211:  XORLW  01
0212:  MOVWF  03
0213:  GOTO   215
0214:  BCF    03.0
0215:  RETURN
.................... 
.................... #list
.................... 
.................... #device ADC = 10     // Conversor Anal?gico Digital con  10 bits de resoluci?n
.................... #fuses XT, NOWDT, NOPROTECT, NOLVP, PUT, BROWNOUT, INTRC_IO
.................... #use delay(clock=4000000)
.................... //#include <LCD.C>
.................... #byte PORTA = 5
.................... //#byte PORTD = 8
.................... 
.................... int16 duty = 20;
.................... int Timer2, PostCaler; // Preescaler;
.................... //Para 5KHz, el valor para modular el DutyCycle ser? 200 = 100%
.................... //Por lo tanto duty = 100 implica un DutyCycle de 50%
.................... float V1, V2=0, I1, I2=0, P1, P2;
.................... 
.................... void main(){
0216:  MOVF   03,W
0217:  ANDLW  1F
0218:  MOVWF  03
0219:  MOVLW  61
021A:  BSF    03.5
021B:  MOVWF  0F
021C:  CLRF   10
021D:  MOVF   0F,W
021E:  BCF    03.5
021F:  CLRF   21
0220:  MOVLW  14
0221:  MOVWF  20
0222:  CLRF   2B
0223:  CLRF   2A
0224:  CLRF   29
0225:  CLRF   28
0226:  CLRF   33
0227:  CLRF   32
0228:  CLRF   31
0229:  CLRF   30
022A:  MOVLW  FF
022B:  MOVWF  3C
022C:  BSF    03.5
022D:  BSF    03.6
022E:  MOVF   09,W
022F:  ANDLW  C0
0230:  MOVWF  09
0231:  BCF    03.6
0232:  BCF    1F.4
0233:  BCF    1F.5
0234:  MOVLW  00
0235:  BSF    03.6
0236:  MOVWF  08
0237:  BCF    03.5
0238:  CLRF   07
0239:  CLRF   08
023A:  CLRF   09
023B:  BCF    03.7
....................     
....................     //Para la PWM de 10Khz es necesario un Timer2=9, cuando la frecuencia del cristal es de 4Mhz,
....................     //el PostCaler=1 y Preescaler=4, en base a la siguiente f?rmula:
....................     //Timer2 = (Td*fxtal/(4*Preescaler-PostCaler)) - 1
....................     Timer2 = 9;         //Para este valor del Timer se puede alcanzar una f=10KHz
023C:  MOVLW  09
023D:  BCF    03.6
023E:  MOVWF  22
....................     PostCaler = 1;      // S?lo puede tomar valores de 1, 4 o 16, igual que el preescaler
023F:  MOVLW  01
0240:  MOVWF  23
....................     //Preescaler = 4;
....................     
....................     setup_timer_2(t2_div_by_4, Timer2, PostCaler);    //Configuraci?n del timer 2, preescaler=4, timer2=49, postcaler=1
0241:  SUBWF  23,W
0242:  MOVWF  78
0243:  RLF    78,W
0244:  MOVWF  77
0245:  RLF    77,F
0246:  RLF    77,F
0247:  MOVLW  F8
0248:  ANDWF  77,F
0249:  MOVF   77,W
024A:  IORLW  05
024B:  MOVWF  12
024C:  MOVF   22,W
024D:  BSF    03.5
024E:  MOVWF  12
....................     setup_ccp1(ccp_pwm);                              //Con esto estamos configurando el modo PWM en la salida ccp1 (pin RC2)
024F:  BCF    03.5
0250:  BCF    3C.2
0251:  MOVF   3C,W
0252:  BSF    03.5
0253:  MOVWF  07
0254:  BCF    03.5
0255:  BCF    07.2
0256:  MOVLW  0C
0257:  MOVWF  17
0258:  BSF    03.5
0259:  CLRF   1B
025A:  CLRF   1C
025B:  MOVLW  01
025C:  MOVWF  1D
....................     setup_adc_ports(all_analog);                      //Todos los puertos analogicos quedaran como analogicos
025D:  BSF    03.6
025E:  MOVF   09,W
025F:  ANDLW  C0
0260:  IORLW  1F
0261:  MOVWF  09
0262:  BCF    03.6
0263:  BCF    1F.4
0264:  BCF    1F.5
0265:  MOVLW  FF
0266:  BSF    03.6
0267:  MOVWF  08
....................     setup_adc(adc_clock_internal);                    //Configuramos la velocidad del ADC
0268:  BCF    03.5
0269:  BCF    03.6
026A:  BSF    1F.6
026B:  BSF    1F.7
026C:  BSF    03.5
026D:  BSF    1F.7
026E:  BCF    03.5
026F:  BSF    1F.0
....................     set_tris_a(0b00000011);                           //Configuro los pines RA0 y RA1 como entradas
0270:  MOVLW  03
0271:  BSF    03.5
0272:  MOVWF  05
....................     //lcd_init();
....................     //lcd_putc("\f");
....................     
....................     
....................     while(1){
....................     
....................        set_pwm1_duty(duty);                //Se confiugura el dutycycle de la PWM 
0273:  BCF    03.5
0274:  MOVF   21,W
0275:  MOVWF  79
0276:  MOVF   20,W
0277:  MOVWF  78
0278:  RRF    79,F
0279:  RRF    78,F
027A:  RRF    79,F
027B:  RRF    78,F
027C:  RRF    79,F
027D:  MOVF   78,W
027E:  MOVWF  15
027F:  RRF    79,F
0280:  RRF    79,W
0281:  ANDLW  30
0282:  MOVWF  77
0283:  MOVF   17,W
0284:  ANDLW  CF
0285:  IORWF  77,W
0286:  MOVWF  17
....................        
....................        /*------Imprimir datos en LCD---------*/
....................        //lcd_gotoxy(1,1);                  //Ubiquese en la posicion 1,1
....................        //lcd_putc("El Duty Cycle es:");
....................        //lcd_gotoxy(2,2);                  //Ubiquese en la posicion 2,2
....................        //printf(lcd_putc,"D = %i",duty);   //Muestra el valor numerico de la conversionconversion
....................        //delay_ms(1000);
....................        //lcd_putc("\f");                   // Borramos LCD
....................        
....................          
....................        set_adc_channel(0);          //Selecciono el canal 0 (RA0)
0287:  MOVLW  00
0288:  MOVWF  78
0289:  MOVF   1F,W
028A:  ANDLW  C3
028B:  IORWF  78,W
028C:  MOVWF  1F
....................        delay_us(20);                //Retardo de 50 us para leer la data
028D:  MOVLW  06
028E:  MOVWF  77
028F:  DECFSZ 77,F
0290:  GOTO   28F
0291:  NOP
....................        V1=read_adc();               //Guardo en bits el voltaje leido por el canal 0
0292:  BSF    1F.1
0293:  BTFSC  1F.1
0294:  GOTO   293
0295:  MOVF   1E,W
0296:  MOVWF  79
0297:  BSF    03.5
0298:  MOVF   1E,W
0299:  MOVWF  78
029A:  MOVF   79,W
029B:  MOVWF  7A
029C:  MOVF   1E,W
029D:  BCF    03.5
029E:  MOVWF  3D
029F:  MOVF   79,W
02A0:  MOVWF  3E
02A1:  CALL   004
02A2:  MOVF   7A,W
02A3:  MOVWF  27
02A4:  MOVF   79,W
02A5:  MOVWF  26
02A6:  MOVF   78,W
02A7:  MOVWF  25
02A8:  MOVF   77,W
02A9:  MOVWF  24
....................        V1 = V1*0.0048828125;        //Valor real del voltaje medido
02AA:  MOVF   27,W
02AB:  MOVWF  40
02AC:  MOVF   26,W
02AD:  MOVWF  3F
02AE:  MOVF   25,W
02AF:  MOVWF  3E
02B0:  MOVF   24,W
02B1:  MOVWF  3D
02B2:  CLRF   44
02B3:  CLRF   43
02B4:  MOVLW  20
02B5:  MOVWF  42
02B6:  MOVLW  77
02B7:  MOVWF  41
02B8:  CALL   021
02B9:  MOVF   7A,W
02BA:  MOVWF  27
02BB:  MOVF   79,W
02BC:  MOVWF  26
02BD:  MOVF   78,W
02BE:  MOVWF  25
02BF:  MOVF   77,W
02C0:  MOVWF  24
....................        
....................        set_adc_channel(1);          //Selecciono el canal 1 (RA1)
02C1:  MOVLW  04
02C2:  MOVWF  78
02C3:  MOVF   1F,W
02C4:  ANDLW  C3
02C5:  IORWF  78,W
02C6:  MOVWF  1F
....................        delay_us(20);                //Retardo de 50 us para leer la data
02C7:  MOVLW  06
02C8:  MOVWF  77
02C9:  DECFSZ 77,F
02CA:  GOTO   2C9
02CB:  NOP
....................        I1=read_adc();               //Guardo en bits la corriente leida por el canal 1
02CC:  BSF    1F.1
02CD:  BTFSC  1F.1
02CE:  GOTO   2CD
02CF:  MOVF   1E,W
02D0:  MOVWF  79
02D1:  BSF    03.5
02D2:  MOVF   1E,W
02D3:  MOVWF  78
02D4:  MOVF   79,W
02D5:  MOVWF  7A
02D6:  MOVF   1E,W
02D7:  BCF    03.5
02D8:  MOVWF  3D
02D9:  MOVF   79,W
02DA:  MOVWF  3E
02DB:  CALL   004
02DC:  MOVF   7A,W
02DD:  MOVWF  2F
02DE:  MOVF   79,W
02DF:  MOVWF  2E
02E0:  MOVF   78,W
02E1:  MOVWF  2D
02E2:  MOVF   77,W
02E3:  MOVWF  2C
....................        I1= I1*0.0048828125;         //Valor real del voltaje medido
02E4:  MOVF   2F,W
02E5:  MOVWF  40
02E6:  MOVF   2E,W
02E7:  MOVWF  3F
02E8:  MOVF   2D,W
02E9:  MOVWF  3E
02EA:  MOVF   2C,W
02EB:  MOVWF  3D
02EC:  CLRF   44
02ED:  CLRF   43
02EE:  MOVLW  20
02EF:  MOVWF  42
02F0:  MOVLW  77
02F1:  MOVWF  41
02F2:  CALL   021
02F3:  MOVF   7A,W
02F4:  MOVWF  2F
02F5:  MOVF   79,W
02F6:  MOVWF  2E
02F7:  MOVF   78,W
02F8:  MOVWF  2D
02F9:  MOVF   77,W
02FA:  MOVWF  2C
....................   
....................    /*-----------Algoritmo MPPT 2 ----------*/
....................        P1 = V1*I1;
02FB:  MOVF   27,W
02FC:  MOVWF  40
02FD:  MOVF   26,W
02FE:  MOVWF  3F
02FF:  MOVF   25,W
0300:  MOVWF  3E
0301:  MOVF   24,W
0302:  MOVWF  3D
0303:  MOVF   2F,W
0304:  MOVWF  44
0305:  MOVF   2E,W
0306:  MOVWF  43
0307:  MOVF   2D,W
0308:  MOVWF  42
0309:  MOVF   2C,W
030A:  MOVWF  41
030B:  CALL   021
030C:  MOVF   7A,W
030D:  MOVWF  37
030E:  MOVF   79,W
030F:  MOVWF  36
0310:  MOVF   78,W
0311:  MOVWF  35
0312:  MOVF   77,W
0313:  MOVWF  34
....................        P2 = V2*I2;
0314:  MOVF   2B,W
0315:  MOVWF  40
0316:  MOVF   2A,W
0317:  MOVWF  3F
0318:  MOVF   29,W
0319:  MOVWF  3E
031A:  MOVF   28,W
031B:  MOVWF  3D
031C:  MOVF   33,W
031D:  MOVWF  44
031E:  MOVF   32,W
031F:  MOVWF  43
0320:  MOVF   31,W
0321:  MOVWF  42
0322:  MOVF   30,W
0323:  MOVWF  41
0324:  CALL   021
0325:  MOVF   7A,W
0326:  MOVWF  3B
0327:  MOVF   79,W
0328:  MOVWF  3A
0329:  MOVF   78,W
032A:  MOVWF  39
032B:  MOVF   77,W
032C:  MOVWF  38
....................        
....................        if(P1 - P2 > 0){
032D:  BSF    03.1
032E:  MOVF   37,W
032F:  MOVWF  40
0330:  MOVF   36,W
0331:  MOVWF  3F
0332:  MOVF   35,W
0333:  MOVWF  3E
0334:  MOVF   34,W
0335:  MOVWF  3D
0336:  MOVF   3B,W
0337:  MOVWF  44
0338:  MOVF   3A,W
0339:  MOVWF  43
033A:  MOVF   39,W
033B:  MOVWF  42
033C:  MOVF   38,W
033D:  MOVWF  41
033E:  CALL   096
033F:  MOVF   7A,W
0340:  MOVWF  40
0341:  MOVF   79,W
0342:  MOVWF  3F
0343:  MOVF   78,W
0344:  MOVWF  3E
0345:  MOVF   77,W
0346:  MOVWF  3D
0347:  CLRF   44
0348:  CLRF   43
0349:  CLRF   42
034A:  CLRF   41
034B:  MOVF   40,W
034C:  MOVWF  48
034D:  MOVF   3F,W
034E:  MOVWF  47
034F:  MOVF   3E,W
0350:  MOVWF  46
0351:  MOVF   3D,W
0352:  MOVWF  45
0353:  CALL   1D7
0354:  BTFSS  03.0
0355:  GOTO   3B9
....................          if(V1 - V2 > 0){
0356:  BSF    03.1
0357:  MOVF   27,W
0358:  MOVWF  40
0359:  MOVF   26,W
035A:  MOVWF  3F
035B:  MOVF   25,W
035C:  MOVWF  3E
035D:  MOVF   24,W
035E:  MOVWF  3D
035F:  MOVF   2B,W
0360:  MOVWF  44
0361:  MOVF   2A,W
0362:  MOVWF  43
0363:  MOVF   29,W
0364:  MOVWF  42
0365:  MOVF   28,W
0366:  MOVWF  41
0367:  CALL   096
0368:  MOVF   7A,W
0369:  MOVWF  40
036A:  MOVF   79,W
036B:  MOVWF  3F
036C:  MOVF   78,W
036D:  MOVWF  3E
036E:  MOVF   77,W
036F:  MOVWF  3D
0370:  CLRF   44
0371:  CLRF   43
0372:  CLRF   42
0373:  CLRF   41
0374:  MOVF   40,W
0375:  MOVWF  48
0376:  MOVF   3F,W
0377:  MOVWF  47
0378:  MOVF   3E,W
0379:  MOVWF  46
037A:  MOVF   3D,W
037B:  MOVWF  45
037C:  CALL   1D7
037D:  BTFSS  03.0
037E:  GOTO   3B4
....................             if(I1 - I2 > 0){
037F:  BSF    03.1
0380:  MOVF   2F,W
0381:  MOVWF  40
0382:  MOVF   2E,W
0383:  MOVWF  3F
0384:  MOVF   2D,W
0385:  MOVWF  3E
0386:  MOVF   2C,W
0387:  MOVWF  3D
0388:  MOVF   33,W
0389:  MOVWF  44
038A:  MOVF   32,W
038B:  MOVWF  43
038C:  MOVF   31,W
038D:  MOVWF  42
038E:  MOVF   30,W
038F:  MOVWF  41
0390:  CALL   096
0391:  MOVF   7A,W
0392:  MOVWF  40
0393:  MOVF   79,W
0394:  MOVWF  3F
0395:  MOVF   78,W
0396:  MOVWF  3E
0397:  MOVF   77,W
0398:  MOVWF  3D
0399:  CLRF   44
039A:  CLRF   43
039B:  CLRF   42
039C:  CLRF   41
039D:  MOVF   40,W
039E:  MOVWF  48
039F:  MOVF   3F,W
03A0:  MOVWF  47
03A1:  MOVF   3E,W
03A2:  MOVWF  46
03A3:  MOVF   3D,W
03A4:  MOVWF  45
03A5:  CALL   1D7
03A6:  BTFSS  03.0
03A7:  GOTO   3AD
....................                duty = duty + 1;
03A8:  MOVLW  01
03A9:  ADDWF  20,F
03AA:  BTFSC  03.0
03AB:  INCF   21,F
....................             }
03AC:  GOTO   3B3
....................             else{
....................                duty = duty - 1;
03AD:  MOVLW  01
03AE:  SUBWF  20,F
03AF:  MOVLW  00
03B0:  BTFSS  03.0
03B1:  MOVLW  01
03B2:  SUBWF  21,F
....................             }
....................          }
03B3:  GOTO   3B8
....................          else{
....................             duty = duty + 1;
03B4:  MOVLW  01
03B5:  ADDWF  20,F
03B6:  BTFSC  03.0
03B7:  INCF   21,F
....................          }
....................        }
03B8:  GOTO   3ED
....................        else{
....................          if(V1 - V2 > 0){
03B9:  BSF    03.1
03BA:  MOVF   27,W
03BB:  MOVWF  40
03BC:  MOVF   26,W
03BD:  MOVWF  3F
03BE:  MOVF   25,W
03BF:  MOVWF  3E
03C0:  MOVF   24,W
03C1:  MOVWF  3D
03C2:  MOVF   2B,W
03C3:  MOVWF  44
03C4:  MOVF   2A,W
03C5:  MOVWF  43
03C6:  MOVF   29,W
03C7:  MOVWF  42
03C8:  MOVF   28,W
03C9:  MOVWF  41
03CA:  CALL   096
03CB:  MOVF   7A,W
03CC:  MOVWF  40
03CD:  MOVF   79,W
03CE:  MOVWF  3F
03CF:  MOVF   78,W
03D0:  MOVWF  3E
03D1:  MOVF   77,W
03D2:  MOVWF  3D
03D3:  CLRF   44
03D4:  CLRF   43
03D5:  CLRF   42
03D6:  CLRF   41
03D7:  MOVF   40,W
03D8:  MOVWF  48
03D9:  MOVF   3F,W
03DA:  MOVWF  47
03DB:  MOVF   3E,W
03DC:  MOVWF  46
03DD:  MOVF   3D,W
03DE:  MOVWF  45
03DF:  CALL   1D7
03E0:  BTFSS  03.0
03E1:  GOTO   3E7
....................             duty = duty + 1;
03E2:  MOVLW  01
03E3:  ADDWF  20,F
03E4:  BTFSC  03.0
03E5:  INCF   21,F
....................          }
03E6:  GOTO   3ED
....................          else{
....................             duty = duty - 1;
03E7:  MOVLW  01
03E8:  SUBWF  20,F
03E9:  MOVLW  00
03EA:  BTFSS  03.0
03EB:  MOVLW  01
03EC:  SUBWF  21,F
....................          }
....................        }  
....................        V2 = V1;
03ED:  MOVF   27,W
03EE:  MOVWF  2B
03EF:  MOVF   26,W
03F0:  MOVWF  2A
03F1:  MOVF   25,W
03F2:  MOVWF  29
03F3:  MOVF   24,W
03F4:  MOVWF  28
....................        I2 = I1;
03F5:  MOVF   2F,W
03F6:  MOVWF  33
03F7:  MOVF   2E,W
03F8:  MOVWF  32
03F9:  MOVF   2D,W
03FA:  MOVWF  31
03FB:  MOVF   2C,W
03FC:  MOVWF  30
03FD:  GOTO   274
....................     }
.................... }
03FE:  SLEEP

Configuration Fuses:
   Word  1: 2FE4   INTRC_IO NOWDT PUT MCLR NOPROTECT NOCPD BROWNOUT IESO FCMEN NOLVP NODEBUG
   Word  2: 3FFF   BORV40 NOWRT
